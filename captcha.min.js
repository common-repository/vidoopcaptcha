
jQuery(function(){var $=jQuery;var debug=vidoop_secure.debug;function add_placeholder(input,placeholder){$(input).attr('placeholder',placeholder);if(!$.browser.safari){$(input).each(function(){if(this.value==''||this.value==this.getAttribute("placeholder")){this.value=this.getAttribute("placeholder");$(this).addClass("vs_placeholder");}}).focus(function(){if(this.value==this.getAttribute("placeholder")){this.value="";$(this).removeClass("vs_placeholder");}}).blur(function(){if(this.value.length<1){this.value=this.getAttribute("placeholder");$(this).addClass("vs_placeholder");}});$(input.form).submit(function(){$(this).find('input[placeholder]').each(function(){if($(this).hasClass('vs_placeholder')){this.value='';}});});}}
function Captcha($input,captcha_id,instructions){this.small={width:180,height:1};this.anchor=$("<div style='position: relative; clear: both;'></div>").insertAfter($input);this.$slider=$('<div class="vs_bubble"><p>'+get_instructions()+'</p><span class="vs_hide"><a href="#">hide &times;</a></span>'+'<img src="https://api.vidoop.com/vs/captchas/'+captcha_id+'/image"><div class="vs_logo"></div></div>').appendTo(this.anchor).css({opacity:0});var me=this;this.input=$input[0];$(".vidoop_secure .vs_bubble").mousedown(function(e){e.preventDefault();});$(".vidoop_secure .vs_bubble a").click(function(e){$input[0].blur();e.preventDefault();});$(".vidoop_secure .vs_logo").click(function(e){open("http://vidoop.com/captcha/");e.preventDefault();});$input.focus(function(e){me.slide_in(e);}).blur(function(e){if(!debug){me.slide_out(e);}});$(".vidoop_secure .vs_bubble img").load(function(){me.$slider.css('display','block');me.large={width:me.$slider.width(),height:me.$slider.height()};me.$slider.css({'display':'none','width':me.small.width,'height':me.small.height});$('<div style="visibility:hidden;position:absolute;height:1px;">x</div>').appendTo(me.anchor).css('top',me.large.height);if(me.focused){me.slide_in();}});}
Captcha.prototype={slide_in:function(e){var me=this;if(this.large){this.$slider.stop().animate({'width':this.large.width,'height':this.large.height,'opacity':1},function(){me.$slider[0].scrollIntoView();});}
this.input.focus();this.focused=true;},slide_out:function(e){var me=this;this.$slider.stop().animate({width:this.small.width,height:this.small.height,opacity:'0'},function(){me.$slider.hide();});this.focused=false;},slide_toggle:function(e){if(this.$slider.css('display')=="none"){this.slide_in(e);}
else{this.slide_out(e);}}};function add_style(){$(['<style type="text/css">','.vidoop_secure { position: relative }','.vidoop_secure .vs_hide { position: absolute; right: 10px; top: 10px; }','.vidoop_secure .vs_bubble { text-align: center; padding: 5px; position: absolute; z-index: 999; display: none; background-color: #eee; border: solid 1px #444; margin-bottom: 4px; }','.vidoop_secure p { font-size: 14px; color: black; width: 100%; }','.vidoop_secure .vs_placeholder { color: #888; }','.vidoop_secure .vs_logo { height: 12px; width: 70px; clear: both; float: right; background: url(vidoop_captcha_logo_small.gif) no-repeat center center; border: #aaa 1px solid; cursor: pointer; }','</style>'].join("\n")).prependTo("head");}
function get_instructions(){return vidoop_secure.instructions;}
add_style();var $input=$('.vidoop_secure input:text');add_placeholder($input[0],"Click here to fill me in");var captcha=new Captcha($input,$('.vidoop_secure input:hidden').val(),get_instructions());$('.vidoop_secure .vs_button').click(function(e){captcha.slide_toggle();});});